(()=>{"use strict";const e=[{title:"Нефтедобыча",author:"РБК",date:"00:00 20.03.2021",link:"https://ya.ru",read:!1,text:"После решения добывающих нефть стран стоимость барреля нефти Brent на торгах в Лондоне упала ниже 51 доллара и составила 50,89 доллара."},{title:"Политика Штатов",author:"Риа-Новости",date:"00:00 19.03.2021",link:"https://www.google.ru/",read:!0,text:"Американский сенатор Боб Коркер заявил, что законопроект о введении новых санкций в отношении России может быть рассмотрен комитетом по иностранным делам палаты этим летом."},{title:"Троллейбус",author:"Фонтанка.ру",date:"00:00 18.03.2021",link:"https://www.yahoo.com/",read:!1,text:"«Илону Маску только не показывайте». По петербургским дорогам прокатился троллейбус с «танцующими» колёсами."},{title:"Спорт",author:"Яндекс.Новости",date:"00:00 17.03.2021",link:"https://ya.ru",read:!1,text:"Российским легкоатлетам снова начнут выдавать нейтральный статус для участия в международных соревнованиях."},{title:"Туризм",author:"Discovery",date:"00:00 16.03.2021",link:"https://www.google.ru/",read:!1,text:"Ростуризм: За полдня россияне купили туры с кешбэком на 100 млн рублей."}],t=document.querySelector(".root"),n=new class{constructor(){this.block,this.newsContainer,this.headerCountUnreadNews}createBlock(){const e=document.createElement("section");e.classList.add("widget");const t=document.createElement("header"),n=document.createElement("h2"),a=document.createElement("p");t.classList.add("widget__header"),n.classList.add("widget__header-title"),n.textContent="Свежие новости",a.classList.add("widget__header-count-unread-news");const s=document.createElement("ul");s.classList.add("widget__news-container"),t.appendChild(n),t.appendChild(a),e.appendChild(t),e.appendChild(s),this.block=e,this.newsContainer=s,this.headerCountUnreadNews=a}_createSeparator(){const e=document.createElement("div");return e.classList.add("widget__separator"),e}addNews(e,t=!1){if(this.newsContainer.appendChild(e),!t){const e=this._createSeparator();this.newsContainer.appendChild(e)}}setCountUnreadNews(e){0===e?this.headerCountUnreadNews.style.display="none":this.headerCountUnreadNews.textContent=e}decreaseCountUnreadNews(){this.headerCountUnreadNews.textContent=Number(this.headerCountUnreadNews.textContent)-1,0===Number(this.headerCountUnreadNews.textContent)&&(this.headerCountUnreadNews.style.display="none")}},a=new class{constructor(){this.block}createBlock(e){const t=document.createElement("li");t.classList.add("news"),e.read&&this.addRead(t);const n=document.createElement("a");n.classList.add("news__link"),n.setAttribute("href",e.link),n.setAttribute("target","__blank");const a=document.createElement("h3");a.classList.add("news__title"),a.textContent=e.title;const s=document.createElement("p");s.classList.add("news__text"),s.textContent=e.text;const d=document.createElement("div");d.classList.add("news__about-container");const o=document.createElement("p");o.classList.add("news__author"),o.textContent=e.author;const r=document.createElement("p");r.classList.add("news__date"),r.textContent=e.date,n.appendChild(a),n.appendChild(s),d.appendChild(r),d.appendChild(o),n.appendChild(d),t.append(n),this.block=t}addRead(e){e.classList.add("news_read")}};let s;fetch("http://localhost:3000").then((e=>e.json())).then((e=>{s=e})).catch((t=>{console.log(t),s=e})).finally((()=>{n.createBlock();for(let e of s)a.createBlock(e),n.addNews(a.block);n.setCountUnreadNews(function(e){let t=0;return e.forEach((e=>{!e.read&&t++})),t}(s)),t.appendChild(n.block),n.block.addEventListener("click",(e=>{if(e.target.closest(".widget__header")||e.target.classList.contains("widget__header"))n.newsContainer.classList.toggle("widget__news-container_opened");else{const t=e.path.find((e=>e.classList.contains("news")));t.classList.contains("news_read")||(a.addRead(t),n.decreaseCountUnreadNews())}}))}))})();